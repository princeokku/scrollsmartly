!function(a){a([],function(){"use strict";function a(){if(o.delayedFunctionsQueue.length>0){console.log(o.delayedFunctionsQueue);var a=o.delayedFunctionsQueue.shift();a()}}function b(){o.mutated=!0}function c(a){if(m.hashScrollSynced){var b=a||event,c=b.target||b.srcElement;void 0!==c.href&&-1!==c.href.indexOf("#")&&(console.log(c.href),f(!1))}}function d(){o.mutated===!0&&(h(),console.log("mutated"),void 0!==I&&(o.mutated=!1)),g(),m.easing<1&&(m.easing=1);var b=(q-t)/m.easing,c=(r-u)/m.easing;if(m.velocity=[b,c],v===t&&w===u||o.reachedCurrentTarget){if(void 0!==I&&I.disconnect(),A(window,"scroll",F),o.reachedCurrentTarget)return;return scrollTo(q,r),m.scrolledTo=p,o.reachedCurrentTarget=!0,m.velocity=[0,0],o.transit.length>0?m.scroll(o.transit.shift()):(e(),m.scrollingTo=v=w=null,"function"==typeof o.callback&&o.callback(),a(),window.dispatchEvent(M)),void 0}v=t,w=u,scrollTo(R(t+b),R(u+c)),Q=setTimeout(function(){d()},o.scrollProcessInterval)}function e(){!m.scrollHashSynced||s===location.hash.substring(1)||o.delayedFunctionsQueue.length>0||(""!==s?(f(!1),void 0!==history.pushState?history.pushState("",document.title,location.pathname+"#"+s):i()||0!==m.marginLeft||0!==m.marginTop?(p.id="",location.hash="#"+s,p.id=s):location.hash="#"+s):""!==location.hash&&void 0!==history.pushState&&(f(!1),history.pushState("",document.title,location.pathname)))}function f(a){m.scrollHashSynced&&(a?clearTimeout(S):(C=!1,S=setTimeout(function(){C=!0},30)))}function g(){t=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,m.currentLeft=t,m.currentTop=u}function h(){for(var a=0,b=0,c=p;c;){if(void 0!==c.offsetLeft)a+=c.offsetLeft,b+=c.offsetTop;else{var d=c.getBoundingClientRect();a+=d.left,b+=d.top}c=c.offsetParent}var e=T(),f=j();q=Math.min(a+f.x,e.x),0>q&&(q=0),r=Math.min(b+f.y,e.y),0>r&&(r=0)}function i(){return m.position&&"left top"!==m.position}function j(){var a=0,b=0;if(i()){var c=String(m.position).split(" ");1===c.length&&(c[1]=c[0]);var d,e;if(void 0!==p.offsetWidth)d=p.offsetWidth,e=p.offsetHeight;else{var f=p.getBoundingClientRect();d=f.width,e=f.height}var g;g=k(c[0]),a=parseInt((y-d)*g,10),g=k(c[1]),b=parseInt((z-e)*g,10)}return{x:-(a+m.marginLeft),y:-(b+m.marginTop)}}function k(a){return"left"===a||"top"===a?0:"center"===a?.5:"right"===a||"bottom"===a?1:"%"===a.charAt(a.length-1)?.01*parseFloat(a):0}function l(a,b){if(void 0!==a){var c;c=void 0===a.length?[a]:a;for(var d=0;d<c.length;d++)b.call(m,c[d],d)}}var m={},n=location.href.split("#")[0],o={scrollProcessInterval:15,stillLoading:!0,callback:void 0,delayedFunctionsQueue:[],transit:[],mutated:null,reachedCurrentTarget:!0};m.set=function(){switch(arguments.length){case 1:if("object"==typeof arguments[0])for(var b in arguments[0])m.hasOwnProperty(b)&&(m[b]=arguments[0][b]);break;case 2:m.hasOwnProperty(arguments[0])&&(m[arguments[0]]=arguments[1])}return a(),m},m.delay=function(){function a(a,e){return function(){var f=arguments,g=function(){setTimeout(function(){"function"==typeof b&&b.apply(this,d),a.apply(m,f)},e)};return null!==m.scrollingTo?o.delayedFunctionsQueue[o.delayedFunctionsQueue.length]=g:g(),-1!==c?m:m.delay(-1)}}var b,c=0,d=[];switch(arguments.length){case 0:break;case 1:"function"==typeof arguments[0]?b=arguments[0]:c=arguments[0];break;case 2:b=arguments[0],c=arguments[1];break;default:b=arguments[0],c=arguments[1];for(var e=2;e<arguments.length;e++)d[e-2]=arguments[e]}var f={};for(var g in m)f[g]="function"==typeof m[g]&&"delay"!==g?a(m[g],c):m[g];return f},m.easing=5,m.scrollingTo=null,m.scrolledTo=null,m.hashScrollSynced=!0,m.scrollHashSynced=!0,m.currentLeft=0,m.currentTop=0,m.position="left top",m.marginLeft=0,m.marginTop=0,m.velocity=[0,0];var p,q=0,r=0,s="",t=0,u=0,v=null,w=null,x=document.documentElement||document.body;m.homeElement=x;var y=0,z=0;""===location.hash&&-1!==location.href.indexOf("#")&&void 0!==history.replaceState&&history.replaceState("",document.title,location.pathname);var A,B;void 0!==window.addEventListener?(A=function(a,b,c){a.addEventListener(b,c,!1)},B=function(a,b,c){a.removeEventListener(b,c,!1)}):"attachEvent"in window&&(A=function(a,b,c){a.attachEvent("on"+b,c)},B=function(a,b,c){a.detachEvent("on"+b,c)});var C=!0,D=function(){C&&m.hashScrollSynced&&(scrollTo(t,u),m.scroll(location.hash.substring(1)))},E=null,F=function(){g()},G=null,H=function(){null!==G&&clearTimeout(E),G=setTimeout(function(){b()},50)};MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||!1;var I;MutationObserver?I=new MutationObserver(function(){b()}):o.mutated=!0;var J,K,L,M,N=function(a){a?(J=function(a){a.preventDefault(),a.stopPropagation(),void 0!==this.scrollSmartlyTarget?m.scroll(this.scrollSmartlyTarget):m.scroll(this.hash.substring(1))},K=function(a){var b=document.createEvent("HTMLEvents");return b.initEvent(a,!1,!1),this["on"+a]=null,A(window,a,function(b){"function"==typeof this["on"+a]?this["on"+a](b):null!==this["on"+a]&&console.log("on"+a+":",this["on"+a])}),b}):"event"in window&&(J=function(){var a=event.srcElement||event.target;event.returnValue=!1,event.cancelBubble=!0,m.scroll(a.hash.substring(1))},K=function(a){var b=document.createEvent("HTMLEvents");return b.initEvent(a,!1,!1),this["on"+a]=null,A(window,a,function(){var b=event;"function"==typeof this["on"+a]?this["on"+a](b):null!==this["on"+a]&&console.log("on"+a+":",this["on"+a])}),b}),L=K("smartlystart"),M=K("smartlyend"),A(window,"hashchange",D),A(window,"scroll",F),A(window,"resize",H),N=function(){}};A(document,"DOMContentLoaded",function(a){N(a)}),A(window,"load",function(a){N(a),g(),V(),!m.hashScrollSynced||""===location.hash&&m.homeElement===x||(void 0!==window.attachEvent&&void 0===window.opera?setTimeout(function(){scrollTo(0,0),m.scroll(location.hash.substring(1)||m.homeElement)},30):(scrollTo(0,0),m.scroll(location.hash.substring(1)||m.homeElement))),A(document.body,"click",c),delete o.stillLoading});var O;if(void 0!==Array.isArray)O=Array.isArray;else{var P=Object.prototype.toString.call;O=function(a){return"[object Array]"===P(a)}}m.scroll=function(){var a=[""],b=null;switch(arguments.length){case 0:break;case 1:"object"==typeof arguments[0]?(1===arguments[0].nodeType?a[0]=arguments[0]:void 0!==arguments[0].via?(a=O(arguments[0].via)?arguments[0].via:[arguments[0].via],void 0!==arguments[0].to&&a.push(arguments[0].to)):a[0]=arguments[0].to,b=void 0!==arguments[0].callback?arguments[0].callback:b):"function"!=typeof arguments[0]?a[0]=arguments[0]:b=arguments[0];break;case 2:"function"==typeof arguments[1]?(a[0]=arguments[0],b=arguments[1]):(a[0]=arguments[0],a[1]=arguments[1]);break;default:for(var c=arguments.length-1,e=0;c>e;e++)a[e]=arguments[e];"function"==typeof arguments[c]?b=arguments[c]:a[c]=arguments[c]}var g=a.shift();return 1===g.nodeType?(p=g,s=g.id):"string"==typeof g&&(p=""!==g?document.getElementById(g):m.homeElement?m.homeElement:x,s=g),null===p?m:(a.length>0&&(o.transit=a),h(),void 0!==I&&I.observe(document.body,{attributes:!0,subtree:!0,characterData:!1}),null!==m.scrollingTo&&o.reachedCurrentTarget?m.scrollingTo=p:(m.scrollingTo=p,o.callback=b||null,clearTimeout(Q),window.dispatchEvent(L)),B(window,"scroll",F),f(!0),o.reachedCurrentTarget=!1,d(),m)};var Q,R=Math.round;Math.abs;var S,T;if(void 0!==window.scrollMaxX)T=function(){return{x:window.scrollMaxX,y:window.scrollMaxY}};else{T=function(){var a=U();return V(),{x:a.width-y,y:a.height-z}};var U=function(){return{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}}var V;if(void 0!==x.clientWidth)V=function(){y=x.clientWidth,z=x.clientHeight};else if(window.innerWidth){var W=document.createElement("div");W.style.position="absolute",W.style.left=W.style.top="0",W.style.width=W.style.height="100%",W.style.margin=W.style.padding="0",W.style.border="none",W.style.visibility="hidden",V=function(){document.body.appendChild(W),y=W.offsetWidth,z=W.offsetHeight,document.body.removeChild(W)}}return m.stop=function(){return o.reachedCurrentTarget=!0,o.transit=[],m.scrollingTo=null,a(),m},m.finish=function(){return o.delayedFunctionsQueue=[],m.stop(),m},m.on=function(b,c){return l(b,function(a){a.scrollSmartlyTarget=void 0!==c?c:"",A(a,"click",J),a.style.cursor="pointer"}),a(),m},m.off=function(b){return l(b,function(a){delete a.scrollSmartlyTarget,B(a,"click",J),a.style.cursor=""}),a(),m},m.replaceAnchor=function(b,c){var d=b.href+"",e=d.lastIndexOf("#");return d.substring(0,e)===n&&(void 0!==b.hash&&(b.hash=d.substring(e+1)),delete b.scrollSmartlyTarget,A(b,"click",J)),c!==!0?(a(),m):void 0},m.all=function(){if(o.stillLoading===!0)return A(window,"load",function(){delete o.stillLoading,m.all()}),a(),m;for(var b=document.links,c=0;c<b.length;c++)m.replaceAnchor(b[c],!0);return a(),m},m})}("undefined"!=typeof define?define:"undefined"!=typeof module?function(a,b){module.exports=b()}:function(a,b){this.smartly=b()});